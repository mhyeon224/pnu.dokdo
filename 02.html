<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ë„: ì—­ì‚¬ì˜ ì§„ì‹¤ê³¼ ì£¼ê¶Œì˜ ê¸°ë¡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f5f5f4; /* warm gray/stone-100 */
        }
        h1, h2, h3, .serif {
            font-family: 'Noto Serif KR', serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            width: 2px;
            background-color: #e5e7eb;
            transform: translateX(-50%);
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
    <!-- Chosen Palette: Earth & Sea
         Background: Warm Stone (#f5f5f4)
         Primary: Deep Ocean Blue (#1e3a8a) - Represents the East Sea
         Accent: Historical Red (#991b1b) - Represents Stamps/Seals/Importance
         Text: Dark Slate (#334155) - High readability
    -->

    <!-- Application Structure Plan:
         1. Header: Emotional hook and clear title.
         2. Dashboard Section (Intro): High-level analysis of the data. 
            - Why: Users need context before diving into details. Visualizing the density of records helps prove the long-standing history.
            - Viz: Bar chart (Events by Era), Doughnut chart (Event Categories).
         3. Interactive Timeline (Core):
            - Layout: Split view (List on left/top, Detail on right/bottom).
            - Interaction: Filter by category (Map, Admin, Conflict), Click to view detail.
            - Justification: Allows non-linear exploration. Users can focus on "International Law" or "Old Maps" specifically.
         4. Footer: Summary and Source citation.
    -->

    <!-- Visualization & Content Choices:
         1. Timeline Density (Bar Chart): Shows that Dokdo history isn't just recent; it spans centuries.
         2. Category Distribution (Doughnut): Highlights the balance between "Historical Proof" (Maps/Records) and "Modern Conflict".
         3. Event Cards: Uses icons (ğŸ“œ, ğŸŒ, âš”ï¸) instead of images to categorize visually without heavy assets.
         4. No SVG/Mermaid: All visuals are CSS/HTML or Chart.js canvas.
    -->
    
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="text-slate-700 bg-stone-50">

    <!-- Header -->
    <header class="bg-blue-900 text-stone-50 py-10 shadow-lg">
        <div class="container mx-auto px-4 text-center">
            <p class="text-blue-200 text-sm font-medium tracking-widest mb-2 uppercase">ëŒ€í•œë¯¼êµ­ ë™ìª½ ë, ì—­ì‚¬ì˜ ì‹œì‘</p>
            <h1 class="text-3xl md:text-5xl font-bold mb-4">ë…ë„: ì—­ì‚¬ì˜ ì§„ì‹¤ê³¼ ì£¼ê¶Œì˜ ê¸°ë¡</h1>
            <p class="max-w-2xl mx-auto text-blue-100 font-light leading-relaxed">
                ìˆ˜ë°±ë§Œ ë…„ ì „ ìì—°ì´ ë¹šì–´ë‚´ê³ , 1,500ë…„ì˜ ì—­ì‚¬ê°€ ì¦ëª…í•˜ëŠ” ìš°ë¦¬ ë•… ë…ë„.<br>
                ê³ ë¬¸í—Œì˜ ê¸°ë¡ë¶€í„° í˜„ëŒ€ì˜ ì‹¤íš¨ì  ì§€ë°°ê¹Œì§€, ë…ë„ì˜ ì—­ì‚¬ë¥¼ ë°ì´í„°ë¥¼ í†µí•´ ë§Œë‚˜ë³´ì„¸ìš”.
            </p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">

        <!-- Section 1: Data Dashboard -->
        <section class="mb-12 animate-fade-in-up">
            <div class="mb-6 border-l-4 border-blue-800 pl-4">
                <h2 class="text-2xl font-bold text-slate-800">ì—­ì‚¬ ë°ì´í„° ë¶„ì„</h2>
                <p class="text-slate-600 mt-1">
                    ë…ë„ ê´€ë ¨ ì‚¬ë£Œì™€ ì‚¬ê±´ë“¤ì„ ìœ í˜•ë³„, ì‹œê¸°ë³„ë¡œ ë¶„ì„í•˜ì—¬ ì—­ì‚¬ì˜ íë¦„ì„ ì‹œê°ì ìœ¼ë¡œ íŒŒì•…í•©ë‹ˆë‹¤. 
                    ë‹¨ìˆœí•œ ì˜ìœ ê¶Œ ì£¼ì¥ì´ ì•„ë‹Œ, ì²´ê³„ì ì¸ ê¸°ë¡ê³¼ í–‰ì •ì  ê´€ë¦¬ê°€ ì§€ì†ë˜ì–´ ì™”ìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Chart 1: Events by Era -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                        <span class="w-2 h-6 bg-blue-600 mr-2 rounded-sm"></span>
                        ì‹œê¸°ë³„ ì—­ì‚¬ì  ê¸°ë¡ ë¹ˆë„
                    </h3>
                    <div class="chart-container">
                        <canvas id="eraChart"></canvas>
                    </div>
                    <p class="text-xs text-slate-500 mt-4 text-center">
                        * ê·¼ëŒ€ ì´í›„ êµ­ì œë²•ì  ëŒ€ì‘ê³¼ ì‹¤íš¨ì  ì§€ë°° ê°•í™”ë¡œ ê¸°ë¡ì´ ì¦ê°€í•˜ëŠ” ì¶”ì„¸ë¥¼ ë³´ì…ë‹ˆë‹¤.
                    </p>
                </div>

                <!-- Chart 2: Event Categories -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                        <span class="w-2 h-6 bg-red-600 mr-2 rounded-sm"></span>
                        ì‚¬ê±´ ë° ì‚¬ë£Œ ìœ í˜• ë¶„í¬
                    </h3>
                    <div class="chart-container">
                        <canvas id="categoryChart"></canvas>
                    </div>
                    <p class="text-xs text-slate-500 mt-4 text-center">
                        * ê³ ì§€ë„ì™€ ë¬¸í—Œ ë“± ì—­ì‚¬ì  ì¦ê±°(ê¸°ë¡/ì§€ë„)ì™€ ì‹¤íš¨ì  ì§€ë°°ë¥¼ ìœ„í•œ í–‰ì • ì¡°ì¹˜ê°€ ì£¼ë¥¼ ì´ë£¹ë‹ˆë‹¤.
                    </p>
                </div>
            </div>
        </section>

        <!-- Section 2: Interactive Timeline Control -->
        <section class="mb-8">
            <div class="flex flex-col md:flex-row justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-stone-200 sticky top-4 z-20">
                <div class="mb-4 md:mb-0">
                    <h2 class="text-xl font-bold text-slate-800">ë…ë„ ì—°ëŒ€ê¸° íƒìƒ‰</h2>
                    <p class="text-sm text-slate-500">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì—¬ ì—­ì‚¬ë¥¼ í•„í„°ë§í•˜ì„¸ìš”.</p>
                </div>
                <div class="flex flex-wrap gap-2 justify-center" id="filterContainer">
                    <button class="filter-btn active px-4 py-2 rounded-full text-sm font-medium transition-all bg-blue-900 text-white shadow-md" data-filter="all">
                        ì „ì²´ ë³´ê¸°
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-stone-100 text-slate-600 hover:bg-stone-200" data-filter="ê¸°ë¡">
                        ğŸ“œ ê¸°ë¡/ì§€ë„
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-stone-100 text-slate-600 hover:bg-stone-200" data-filter="í–‰ì •">
                        ğŸ›ï¸ í–‰ì •/ì§€ë°°
                    </button>
                    <button class="filter-btn px-4 py-2 rounded-full text-sm font-medium transition-all bg-stone-100 text-slate-600 hover:bg-stone-200" data-filter="ë¶„ìŸ">
                        âš ï¸ ë¶„ìŸ/ëŒ€ì‘
                    </button>
                </div>
            </div>
        </section>

        <!-- Section 3: Timeline & Detail View -->
        <section class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
            
            <!-- Timeline List (Left) -->
            <div class="lg:col-span-5 h-[600px] overflow-y-auto scrollbar-hide pr-2" id="timelineList">
                <!-- Javascript will populate this -->
            </div>

            <!-- Detail View (Right - Sticky) -->
            <div class="lg:col-span-7 sticky top-28">
                <div id="detailCard" class="bg-white rounded-2xl shadow-xl border border-stone-100 overflow-hidden transition-all duration-300">
                    <div class="bg-slate-100 h-32 flex items-center justify-center relative overflow-hidden">
                        <div class="absolute inset-0 bg-pattern opacity-10"></div> <!-- Pattern placeholder -->
                        <span id="detailIcon" class="text-6xl filter drop-shadow-sm">ğŸŒ‹</span>
                    </div>
                    <div class="p-8">
                        <div class="flex items-center justify-between mb-4">
                            <span id="detailYear" class="px-3 py-1 bg-blue-100 text-blue-800 text-sm font-bold rounded-full">ì•½ 460~250ë§Œ ë…„ ì „</span>
                            <span id="detailCategory" class="text-sm text-stone-500 font-medium tracking-wider uppercase">ìì—°ì‚¬</span>
                        </div>
                        <h3 id="detailTitle" class="text-2xl md:text-3xl font-bold text-slate-900 mb-4 serif leading-tight">í™”ì‚° í™œë™ìœ¼ë¡œ ë…ë„ íƒ„ìƒ</h3>
                        <div class="prose prose-stone max-w-none">
                            <p id="detailDesc" class="text-lg text-slate-700 leading-relaxed mb-6">
                                ìš¸ë¦‰ë„ë³´ë‹¤ ì•ì„œ í˜•ì„±ëœ í™”ì‚°ì„¬ìœ¼ë¡œ, ë™í•´ì˜ í•´ì € ì§€í˜•ê³¼ ì§€ì§ˆí•™ì  ì—­ì‚¬ë¥¼ ë³´ì—¬ì£¼ëŠ” ì¤‘ìš”í•œ ì¦ê±°ì…ë‹ˆë‹¤.
                            </p>
                        </div>
                        <div class="mt-6 pt-6 border-t border-stone-100 flex items-center justify-between">
                            <div>
                                <span class="text-xs text-stone-400 block mb-1">ì¶œì²˜ / ì‚¬ë£Œ</span>
                                <span id="detailSource" class="text-sm font-medium text-slate-600 bg-stone-100 px-2 py-1 rounded">[1]</span>
                            </div>
                            <button onclick="copyDetail()" class="text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-1 transition-colors">
                                <span>ë‚´ìš© ë³µì‚¬</span>
                                <span class="text-lg">ğŸ“‹</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Helper Text -->
                <p class="text-center text-stone-400 text-sm mt-4">
                    ì™¼ìª½ ëª©ë¡ì—ì„œ ì‚¬ê±´ì„ ì„ íƒí•˜ë©´ ìƒì„¸ ë‚´ìš©ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-400 py-8 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2 text-sm">ë³¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì œê³µëœ 'ë…ë„ì˜ ì—­ì‚¬ ë° ì£¼ìš” ì‚¬ê±´ ì—°ëŒ€ê¸°' ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
            <p class="text-xs text-slate-600">Â© 2024 Dokdo History Interactive View</p>
        </div>
    </footer>

    <script>
        // --- Data Source ---
        const rawData = [
            { year: "ì•½ 460~250ë§Œ ë…„ ì „", event: "í™”ì‚° í™œë™ìœ¼ë¡œ ë…ë„ íƒ„ìƒ (ìš¸ë¦‰ë„ë³´ë‹¤ ì•ì„œ í˜•ì„±)", source: "[1]", category: "ìì—°", icon: "ğŸŒ‹", type: "nature" },
            { year: "1454ë…„", event: "ã€Šì„¸ì¢…ì‹¤ë¡ì§€ë¦¬ì§€ã€‹: ìš°ì‚°(ë…ë„)ê³¼ ë¬´ë¦‰(ìš¸ë¦‰ë„)ì´ ë§‘ì€ ë‚  ì„œë¡œ ë³´ì¸ë‹¤ê³  ê¸°ë¡", source: "[2]", category: "ê¸°ë¡", icon: "ğŸ“œ", type: "record" },
            { year: "1481ë…„", event: "ã€ˆíŒ”ë„ì´ë„ã€‰: ë™í•´ìƒì— ìš¸ë¦‰ë„ì™€ ìš°ì‚°ë„(ë…ë„)ë¥¼ ëª…í™•íˆ í‘œê¸°", source: "[3]", category: "ê¸°ë¡", icon: "ğŸ—ºï¸", type: "record" },
            { year: "1531ë…„", event: "ã€Šì‹ ì¦ë™êµ­ì—¬ì§€ìŠ¹ëŒã€‹: ê°•ì›ë„ ìš¸ì§„í˜„ ì¡°ì— ìš°ì‚°ë„ì— ê´€í•œ ë‚´ìš© ê¸°ìˆ ", source: "[2, 4]", category: "ê¸°ë¡", icon: "ğŸ“š", type: "record" },
            { year: "1667ë…„", event: "ã€Šì€ì£¼ì‹œì²­í•©ê¸°ã€‹(ì¼ë³¸): ì˜¤í‚¤ì„¬ì„ ì¼ë³¸ì˜ ë¶ì„œìª½ ê²½ê³„ë¡œ ì •í•˜ë©° ë…ë„ë¥¼ ì¡°ì„  ë•…ìœ¼ë¡œ ì¸ì‹", source: "[5]", category: "ê¸°ë¡", icon: "ğŸ‡¯ğŸ‡µ", type: "record" },
            { year: "1693ë…„", event: "1ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´: ì¼ë³¸ ì–´ë¶€ë“¤ì—ê²Œ ë‚©ì¹˜ëœ ì•ˆìš©ë³µì´ ë…ë„ê°€ ì¡°ì„  ì˜í† ì„ì„ ì£¼ì¥", source: "[6, 7]", category: "ë¶„ìŸ", icon: "ğŸ—£ï¸", type: "conflict" },
            { year: "1695ë…„", event: "ë—í† ë¦¬ë²ˆ ë‹µë³€ì„œ: ì—ë„ ë§‰ë¶€ì— ì£½ë„(ìš¸ë¦‰ë„)ì™€ ì†¡ë„(ë…ë„)ê°€ ë³¸ë²ˆ ì†Œì†ì´ ì•„ë‹˜ì„ ë³´ê³ ", source: "[8]", category: "ê¸°ë¡", icon: "ğŸ“„", type: "record" },
            { year: "1696ë…„", event: "2ì°¨ ì•ˆìš©ë³µ ì‚¬ê±´ ë° ì¼ë³¸ ë§‰ë¶€ì˜ ìš¸ë¦‰ë„ ë„í•´ ê¸ˆì§€ë ¹ ë°œë ¹", source: "[7, 8]", category: "í–‰ì •", icon: "ğŸš«", type: "admin" },
            { year: "1697ë…„", event: "ì¡°ì„  ì •ë¶€, ìš¸ë¦‰ë„ ìˆ˜í† ê´€ ì œë„ ì‹ ì„¤ (3ë…„ì— í•œ ë²ˆì”© ì„¬ ì¡°ì‚¬)", source: "[8]", category: "í–‰ì •", icon: "ğŸ‘®", type: "admin" },
            { year: "1779ë…„", event: "ã€ˆê°œì • ì¼ë³¸ì—¬ì§€ë¡œì •ì „ë„ã€‰: ë…ë„ì™€ ìš¸ë¦‰ë„ë¥¼ ì±„ìƒ‰í•˜ì§€ ì•Šì•„ ì¼ë³¸ ì˜ì—­ ë°–ìœ¼ë¡œ í‘œì‹œ", source: "[9]", category: "ê¸°ë¡", icon: "ğŸ—ºï¸", type: "record" },
            { year: "1785ë…„", event: "ã€ˆì‚¼êµ­ì ‘ì–‘ì§€ë„ã€‰: ë…ë„ë¥¼ ì¡°ì„ ê³¼ ê°™ì€ í™©ìƒ‰ìœ¼ë¡œ ì¹ í•˜ê³  'ì¡°ì„ ì˜ ê²ƒ'ì´ë¼ ëª…ê¸°", source: "[9]", category: "ê¸°ë¡", icon: "ğŸ–Œï¸", type: "record" },
            { year: "1808ë…„", event: "ã€Šë§Œê¸°ìš”ëŒã€‹: 'ìš°ì‚°ì€ ì™œì¸ë“¤ì´ ë§í•˜ëŠ” ì†¡ë„(ë…ë„)ì´ë‹¤'ë¼ê³  ê¸°ë¡", source: "[4]", category: "ê¸°ë¡", icon: "ğŸ“–", type: "record" },
            { year: "1832ë…„", event: "ã€ˆì‚¼êµ­í†µëŒë„ã€‰(ì„œì–‘): ë…ë„ì™€ ìš¸ë¦‰ë„ë¥¼ í•œë°˜ë„ì™€ ê°™ì€ ìƒ‰ìœ¼ë¡œ í‘œì‹œ", source: "[10]", category: "ê¸°ë¡", icon: "ğŸŒ", type: "record" },
            { year: "1857ë…„", event: "ëŸ¬ì‹œì•„ í•´êµ°, ã€ˆí•œë°˜ë„ ë™í•´ì•ˆ ì§€ë„ã€‰ ë°œê°„í•˜ë©° ë…ë„ë¥¼ í•œêµ­ ì˜í† ë¡œ ì¸ì •", source: "[6]", category: "ê¸°ë¡", icon: "ğŸ‡·ğŸ‡º", type: "record" },
            { year: "1870ë…„", event: "ã€Šì¡°ì„ êµ­ êµì œì‹œë§ ë‚´íƒì„œã€‹: ì¼ë³¸ ì™¸ë¬´ì„± ê´€ë£Œë“¤ì´ ë…ë„ê°€ ì¡°ì„  ì˜í† ì„ì„ ì¸ì •", source: "[11]", category: "ê¸°ë¡", icon: "ğŸ¤", type: "record" },
            { year: "1877ë…„", event: "íƒœì •ê´€ ì§€ë ¹: ì¼ë³¸ ìµœê³  í–‰ì •ê¸°ê´€ì´ \"ë…ë„ëŠ” ì¼ë³¸ê³¼ ê´€ê³„ì—†ìŒ\"ì„ ê³µì‹ ê²°ì •", source: "[11, 12]", category: "í–‰ì •", icon: "ğŸ›ï¸", type: "admin" },
            { year: "1900ë…„", event: "ëŒ€í•œì œêµ­ ì¹™ë ¹ ì œ41í˜¸: ë…ë„ë¥¼ ìš¸ë„êµ°(ìš¸ë¦‰ë„) ê´€í• ì˜ 'ì„ë„'ë¡œ ëª…ì‹œí•˜ë©° ì˜ìœ ê¶Œ ê³µí¬", source: "[4, 13]", category: "í–‰ì •", icon: "ğŸ“œ", type: "admin" },
            { year: "1905ë…„", event: "ì‹œë§ˆë„¤í˜„ ê³ ì‹œ ì œ40í˜¸: ì¼ë³¸ì´ ëŸ¬ì¼ì „ìŸ ì¤‘ ë…ë„ë¥¼ 'ë‹¤ì¼€ì‹œë§ˆ'ë¡œ ëª…ëª…í•˜ê³  ê°•ì œ í¸ì…", source: "[3, 12, 14]", category: "ë¶„ìŸ", icon: "âš”ï¸", type: "conflict" },
            { year: "1906ë…„", event: "ìš¸ë¦‰êµ°ìˆ˜ ì‹¬í¥íƒì˜ ë³´ê³  ë° ì˜ì •ë¶€ ã€ˆì§€ë ¹ ì œ3í˜¸ã€‰: ì¼ë³¸ì˜ í¸ì… ì£¼ì¥ì„ ì „ë©´ ë°˜ë°•", source: "[5]", category: "í–‰ì •", icon: "ğŸ“¢", type: "admin" },
            { year: "1946ë…„", event: "ì—°í•©êµ°ìµœê³ ì‚¬ë ¹ê´€ ì§€ë ¹(SCAPIN) ì œ677í˜¸: ë…ë„ë¥¼ ì¼ë³¸ í†µì¹˜ ì˜ì—­ì—ì„œ ì œì™¸", source: "[15, 16]", category: "êµ­ì œ", icon: "ğŸ‡ºğŸ‡³", type: "intl" },
            { year: "1951ë…„", event: "ëŒ€í•œë¯¼êµ­ 'í‰í™”ì„ '(ì´ìŠ¹ë§Œ ë¼ì¸) ì„ í¬: ë…ë„ë¥¼ í¬í•¨í•œ í•´ì–‘ ì£¼ê¶Œ ëŒ€ë‚´ì™¸ ì²œëª…", source: "[17, 18]", category: "í–‰ì •", icon: "âš“", type: "admin" },
            { year: "1953ë…„", event: "ë…ë„ì˜ìš©ìˆ˜ë¹„ëŒ€ ë° ë…ë„ê²½ë¹„ëŒ€ í™œë™ ì‹œì‘ (ë¯¼ê°„ ìë°œì  ìˆ˜í˜¸)", source: "[18, 19]", category: "í–‰ì •", icon: "ğŸ›¡ï¸", type: "admin" },
            { year: "1965ë…„", event: "í•œì¼ê¸°ë³¸ì¡°ì•½ ì²´ê²° ë° ì´ë¥¸ë°” 'ë…ë„ ë°€ì•½' (ê°ˆë“±ì˜ ì ì •ì  ìœ ë³´)", source: "[20]", category: "ë¶„ìŸ", icon: "âœï¸", type: "conflict" },
            { year: "1968ë…„", event: "ìµœì¢…ë• ì”¨, ë…ë„ ì„œë„ì— ê±°ì£¼ ì‹œì‘ (ìµœì´ˆì˜ ë…ë„ ì£¼ë¯¼)", source: "[21]", category: "í–‰ì •", icon: "ğŸ ", type: "admin" },
            { year: "1981ë…„", event: "ìµœì¢…ë• ì”¨, ì£¼ë¯¼ë“±ë¡ì„ ë…ë„ë¡œ ì´ì „í•˜ì—¬ ìœ ì¸ë„í™” ì„±ê³µ", source: "[21]", category: "í–‰ì •", icon: "ğŸ“«", type: "admin" },
            { year: "1998ë…„", event: "ì‹ í•œì¼ ì–´ì—…í˜‘ì • ì²´ê²°: ë…ë„ê°€ 'ì¤‘ê°„ìˆ˜ì—­'ì— í¬í•¨ë˜ë©° ê°ˆë“± ì¬ì í™”", source: "[22, 23]", category: "ë¶„ìŸ", icon: "ğŸŸ", type: "conflict" },
            { year: "2000ë…„", event: "ì‹œë¯¼ë‹¨ì²´ 'ë…ë„ìˆ˜í˜¸ëŒ€' ì°½ì„¤ (10ì›” 25ì¼ì„ 'ë…ë„ì˜ ë‚ 'ë¡œ ì œì • ìš´ë™)", source: "[13]", category: "í–‰ì •", icon: "ğŸ—“ï¸", type: "admin" },
            { year: "2005ë…„", event: "ì¼ë³¸ ì‹œë§ˆë„¤í˜„, 'ë‹¤ì¼€ì‹œë§ˆì˜ ë‚ ' ì¡°ë¡€ ì œì •ìœ¼ë¡œ ì—­ì‚¬ ê°ˆë“± ì‹¬í™”", source: "[14, 15]", category: "ë¶„ìŸ", icon: "ğŸ˜¡", type: "conflict" },
            { year: "2006ë…„", event: "ë…¸ë¬´í˜„ ëŒ€í†µë ¹, ë…ë„ ê´€ë ¨ ëŒ€êµ­ë¯¼ íŠ¹ë³„ë‹´í™” ë°œí‘œ", source: "[24]", category: "í–‰ì •", icon: "ğŸ¤", type: "admin" },
            { year: "2008ë…„", event: "ì •ë¶€ ì‚°í•˜ 'ë…ë„ì—°êµ¬ì†Œ' ì„¤ë¦½ (ë…ë„ ì •ì±… ë° í•™ìˆ  ì—°êµ¬ ì „ë‹´)", source: "[13]", category: "í–‰ì •", icon: "ğŸ¢", type: "admin" },
            { year: "2015ë…„", event: "ì¼ë³¸ ì´ˆë“± êµê³¼ì„œ 4ì¢… ëª¨ë‘ì— ë…ë„ ê´€ë ¨ ì—­ì‚¬ ì™œê³¡ ê¸°ìˆ  í¬í•¨", source: "[25]", category: "ë¶„ìŸ", icon: "ğŸ“š", type: "conflict" }
        ];

        // --- State Management ---
        let currentFilter = 'all';
        let selectedIndex = 0;

        // --- DOM Elements ---
        const timelineList = document.getElementById('timelineList');
        const detailCard = document.getElementById('detailCard');
        const detailIcon = document.getElementById('detailIcon');
        const detailYear = document.getElementById('detailYear');
        const detailCategory = document.getElementById('detailCategory');
        const detailTitle = document.getElementById('detailTitle');
        const detailDesc = document.getElementById('detailDesc');
        const detailSource = document.getElementById('detailSource');
        const filterBtns = document.querySelectorAll('.filter-btn');

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderCharts();
            renderTimeline();
            updateDetailView(rawData[0]);
            setupFilters();
        });

        // --- Core Logic ---

        function setupFilters() {
            filterBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // Update UI
                    filterBtns.forEach(b => {
                        b.classList.remove('bg-blue-900', 'text-white', 'active');
                        b.classList.add('bg-stone-100', 'text-slate-600');
                    });
                    e.target.classList.remove('bg-stone-100', 'text-slate-600');
                    e.target.classList.add('bg-blue-900', 'text-white', 'active');

                    // Filter Logic
                    const filterVal = e.target.dataset.filter;
                    currentFilter = filterVal;
                    renderTimeline();
                });
            });
        }

        function getFilteredData() {
            if (currentFilter === 'all') return rawData;
            const mapping = {
                'ê¸°ë¡': ['record', 'nature'],
                'í–‰ì •': ['admin', 'intl'],
                'ë¶„ìŸ': ['conflict']
            };
            const allowedTypes = mapping[currentFilter];
            return rawData.filter(item => allowedTypes.includes(item.type));
        }

        function renderTimeline() {
            const data = getFilteredData();
            timelineList.innerHTML = '';

            if (data.length === 0) {
                timelineList.innerHTML = `<div class="p-8 text-center text-stone-500">í•´ë‹¹í•˜ëŠ” ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>`;
                return;
            }

            data.forEach((item, index) => {
                const el = document.createElement('div');
                el.className = `group cursor-pointer p-4 mb-4 rounded-xl border transition-all duration-200 hover:border-blue-400 bg-white shadow-sm flex items-start gap-4 ${index === 0 ? 'border-blue-500 ring-2 ring-blue-50' : 'border-stone-100'}`;
                el.onclick = () => {
                    // Remove active style from all
                    Array.from(timelineList.children).forEach(child => {
                        child.classList.remove('border-blue-500', 'ring-2', 'ring-blue-50');
                        child.classList.add('border-stone-100');
                    });
                    // Add active style to current
                    el.classList.remove('border-stone-100');
                    el.classList.add('border-blue-500', 'ring-2', 'ring-blue-50');
                    
                    updateDetailView(item);
                };

                // Parse title and desc for list view
                const parts = item.event.split(':');
                const title = parts[0];
                const sub = parts.length > 1 ? parts.slice(1).join(':') : '';

                el.innerHTML = `
                    <div class="flex-shrink-0 w-12 h-12 rounded-full bg-stone-50 flex items-center justify-center text-2xl group-hover:scale-110 transition-transform">
                        ${item.icon}
                    </div>
                    <div>
                        <span class="text-xs font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full mb-1 inline-block">${item.year}</span>
                        <h4 class="font-bold text-slate-800 leading-tight group-hover:text-blue-700 transition-colors">${title}</h4>
                        <p class="text-xs text-slate-500 mt-1 line-clamp-2">${sub}</p>
                    </div>
                `;
                timelineList.appendChild(el);
            });
        }

        function updateDetailView(item) {
            // Animate out
            detailCard.classList.add('opacity-50', 'translate-y-2');
            
            setTimeout(() => {
                const parts = item.event.split(':');
                const title = parts[0].trim();
                const desc = parts.length > 1 ? parts.slice(1).join(':').trim() : item.event; // If no colon, use full text

                detailIcon.textContent = item.icon;
                detailYear.textContent = item.year;
                detailCategory.textContent = item.category;
                detailTitle.textContent = title;
                detailDesc.textContent = desc;
                detailSource.textContent = item.source;

                // Animate in
                detailCard.classList.remove('opacity-50', 'translate-y-2');
            }, 200);
        }

        function copyDetail() {
            const text = `${detailYear.textContent}\n${detailTitle.textContent}\n${detailDesc.textContent}\nì¶œì²˜: ${detailSource.textContent}`;
            navigator.clipboard.writeText(text).then(() => {
                alert('ë‚´ìš©ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
            });
        }

        // --- Visualization Logic ---
        function renderCharts() {
            // Chart 1: Events by Era
            // Pre-process Data
            const eraCounts = {
                'ê³ ëŒ€~1500ë…„ëŒ€': 0,
                '1600~1700ë…„ëŒ€': 0,
                '1800ë…„ëŒ€': 0,
                '1900~1950ë…„': 0,
                '1951ë…„ ì´í›„': 0
            };

            rawData.forEach(d => {
                const y = parseInt(d.year.replace(/[^0-9]/g, ''));
                if (isNaN(y)) { // Handle ancient times
                     eraCounts['ê³ ëŒ€~1500ë…„ëŒ€']++; 
                     return;
                }
                if (y < 1600) eraCounts['ê³ ëŒ€~1500ë…„ëŒ€']++;
                else if (y < 1800) eraCounts['1600~1700ë…„ëŒ€']++;
                else if (y < 1900) eraCounts['1800ë…„ëŒ€']++;
                else if (y <= 1950) eraCounts['1900~1950ë…„']++;
                else eraCounts['1951ë…„ ì´í›„']++;
            });

            new Chart(document.getElementById('eraChart'), {
                type: 'bar',
                data: {
                    labels: Object.keys(eraCounts),
                    datasets: [{
                        label: 'ê¸°ë¡/ì‚¬ê±´ ìˆ˜',
                        data: Object.values(eraCounts),
                        backgroundColor: '#1e3a8a', // Blue 900
                        borderRadius: 4,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: (context) => `ì‚¬ê±´ ìˆ˜: ${context.raw}ê±´`
                            }
                        }
                    },
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#f5f5f4' } },
                        x: { grid: { display: false } }
                    }
                }
            });

            // Chart 2: Category Distribution
            const catCounts = {};
            rawData.forEach(d => {
                // Grouping for simpler chart
                let label = d.category;
                if (label === 'ìì—°') label = 'ê¸°ë¡'; // Merge nature into record for chart simplicity or keep separate
                if (label === 'êµ­ì œ') label = 'í–‰ì •'; 
                
                catCounts[label] = (catCounts[label] || 0) + 1;
            });

            new Chart(document.getElementById('categoryChart'), {
                type: 'doughnut',
                data: {
                    labels: Object.keys(catCounts),
                    datasets: [{
                        data: Object.values(catCounts),
                        backgroundColor: [
                            '#3b82f6', // blue-500 (ê¸°ë¡)
                            '#ef4444', // red-500 (ë¶„ìŸ)
                            '#10b981', // emerald-500 (í–‰ì •)
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { usePointStyle: true, padding: 20 } }
                    },
                    cutout: '70%'
                }
            });
        }
    </script>
</body>
</html>
